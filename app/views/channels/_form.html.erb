<%= form_for(@channel, html: {class: "form-horizontal", id:"channel_form"}) do |f| %>
  <% if @channel.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@channel.errors.count, "error") %> prohibited this @channel.from being saved:</h2>

      <ul>
      <% @channel.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= f.label :name, class: "col-sm-3 control-label" %>
    <div class="col-sm-9">
      <%= f.text_field :name, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :queue_path, class: "col-sm-3 control-label" %>
    <div class="col-sm-9">
      <%= f.text_field :queue_path, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :error_path, class: "col-sm-3 control-label" %>
    <div class="col-sm-9">
      <%= f.text_field :error_path, class: "form-control" %>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title pull-left">
            <i class="fa fa-upload"></i>
            FTP Transfert
          </h3>
          <div class="pull-right">
          <a href="#" class="btn btn-sm btn-success pull-right" data-toggle="modal" data-target="#ftp_modal">
            <i class="fa fa-plus"></i>
            <span class="hidden-xs"><%= t :add_ftp %></span>
	  </a>
          </div>
	  <div class="clearfix"></div>
        </div>
        <div class="panel-body">
          <table class="table table-striped table-condensed no-margins">
            <tbody>
              <% @channel.channel_ftps.each do |cf| %>
                <% ftp = cf.ftp %>
                <tr>
                  <td>
                    <a href="#" class="btn btn-xs btn-danger pull-right">
                      <i class="fa fa-times"></i>
                      <span class="hidden-xs"><%= t :remove %></span>
                    </a>
                    <i class="fa fa-sitemap"></i>
                    <code class="ww"><%= ftp.user %></code>
                    @
                    <code class="ww"><%= ftp.host %></code>
                    :
                    <code class="ww"><%= ftp.port %></code>
                    <i class="fa fa-arrow-right"></i>
                    <code class="ww"><%= cf.success_path %></code>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
  
      </div>
    </div>
    <div class="col-md-6">
      <div class="panel panel-success">
        <div class="panel-heading">
          <h3 class="panel-title pull-left">
            <i class="fa fa-envelope"></i>
            Proccessing Notification
          </h3>
          <a href="#" class="btn btn-sm btn-success pull-right">
            <i class="fa fa-plus"></i>
            <span class="hidden-xs"><%= t :add_contact %></span>
	  </a>
	  <div class="clearfix"></div>
        </div>
        <div class="panel-body">
          <table class="table table-striped table-condensed no-margins">
            <tbody>
              <% @channel.users.each do |user| %>
                <tr>
                  <td>
                    <i class="fa fa-<%= if user.role? :user then 'user' else 'envelope' end %>"></i>
                    <%= user.email %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
  
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="panel panel-danger">
        <div class="panel-heading">
          <h3 class="panel-title pull-left">
            <i class="fa fa-envelope"></i>
            Error Notification
          </h3>
          <a href="#" class="btn btn-sm btn-success pull-right">
            <i class="fa fa-plus"></i>
            <span class="hidden-xs"><%= t :add_contact %></span>
	  </a>
	  <div class="clearfix"></div>
        </div>
        <div class="panel-body">
          <table class="table table-striped table-condensed no-margins">
            <tbody>
              <% @channel.contacts.each do |user| %>
                <tr>
                  <td>
                    <i class="fa fa-<%= if user.role? :user then 'user' else 'envelope' end %>"></i>
                    <%= user.email %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <%= render partial: 'channels/ftp_form', locals: { f: f } %>

<% end %>


